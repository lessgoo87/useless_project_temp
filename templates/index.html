<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Braincell Counter</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="container">
        <h1>ðŸ§  Braincell Counter</h1>
        <p id="count">Loading...</p>
        <p id="quote">Fetching wisdom...</p>
    </div>

    <script>
        let braincellCount = 50;

        // Function to fetch braincell count from backend
        async function fetchCount() {
            const res = await fetch("/get_braincells");
            const data = await res.json();
            braincellCount = data.count;
            updateUI();
        }

        // Function to decrement braincell count every 10s
        async function decrementCount() {
            const res = await fetch("/decrement_braincells");
            const data = await res.json();
            braincellCount = data.count;
            updateUI();
        }

        // Update UI based on count
        function updateUI() {
            document.getElementById("count").textContent = `Braincells left: ${braincellCount}`;

            let quote = "";
            if (braincellCount > 5) {
                quote = "Knowledge is power. Youâ€™re running on fumes.";
            } else if (braincellCount >= 3) {
                quote = "You clicked that like it was a good idea.";
            } else if (braincellCount >= 1) {
                quote = "A tiny braincell just floated away...";
            } else {
                quote = "Congratulations. Youâ€™ve reached the intellectual level of a cheese stick.";
                document.body.classList.add("chaos");
            }
            document.getElementById("quote").textContent = quote;
        }

        // Initial fetch
        fetchCount();

        // Decrement every 10 seconds
        setInterval(decrementCount, 10000);
    </script>
</body>
</html>
